<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>fannnnnn</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="php,go">
    <meta property="og:type" content="website">
<meta property="og:title" content="fannnnnn">
<meta property="og:url" content="http://lcf12307.github.io/index.html">
<meta property="og:site_name" content="fannnnnn">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="chavey Liu">
<meta property="article:tag" content="php">
<meta property="article:tag" content="go">
<meta name="twitter:card" content="summary">
    
        <link rel="alternate" type="application/atom+xml" title="fannnnnn" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu"  >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">chavey Liu</h5>
          <a href="mailto:lcf12307@sina.com" title="lcf12307@sina.com" class="mail">lcf12307@sina.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect active">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/lcf12307" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">fannnnnn</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header index-header">

    <div class="container fade-scale">
        <h1 class="title">fannnnnn</h1>
        <h5 class="subtitle">
            
                
            
        </h5>
    </div>

    


</header>

<div class="container body-wrap">

    <ul class="post-list">
    
        <li class="post-list-item fade">
            <article id="post-面试/复盘/4.27其他面试"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2021-06-22 23:55:01" datetime="2021-06-22T15:55:01.011Z"  itemprop="datePublished">2021-06-22 </time>

        


    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2021/06/22/%E9%9D%A2%E8%AF%95/%E5%A4%8D%E7%9B%98/4.27%E5%85%B6%E4%BB%96%E9%9D%A2%E8%AF%95/">面试/复盘/4.27其他面试</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <p>go的内存管理</p>
<p>go和php的区别</p>
<p>go项目的调用过程</p>
<p>es的日志量</p>
<p>每一行一个单词</p>
<p>1：cookie与session的区别<br>2：mysql性能优化（慢日志，explain，索引，内存碎片化）<br>3：聚簇索引与非聚簇索引（B+树与B树，覆盖索引，普通索引，主键索引）<br>4：redis主从同步（日志&amp;&amp;rdb）<br>5：redis实现延时队列<br>6：令牌桶&amp;&amp;漏斗限流<br>7：进程间通信的几种方式与限制条件<br>8：项目<br>9：三道LeetCode的esay难度题目</p>
<p>MySQL的存储引擎的区别<br>B树与B+树的区别<br>Join与In的查询效率<br>有没有使用分布式或者微服务<br>为什么使用SpringBoot而不使用SSM，区别是啥？<br>Redis里面使用的Hash算法是什么？<br>Redis不设置过期时间，他的过期时间是多久？<br>你在系统开发中上从宏观角度有没有一些设计？<br>JDK8里面的一些新东西是？<br>两个List怎么去重？<br>Limit 分页会有什么效率问题？</p>

    

        <a href="/2021/06/22/%E9%9D%A2%E8%AF%95/%E5%A4%8D%E7%9B%98/4.27%E5%85%B6%E4%BB%96%E9%9D%A2%E8%AF%95/" class="post-more waves-effect waves-button">
            Continue reading...
        </a>
    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-股票/股票初级"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2021-06-22 23:55:01" datetime="2021-06-22T15:55:01.009Z"  itemprop="datePublished">2021-06-22 </time>

        


    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2021/06/22/%E8%82%A1%E7%A5%A8/%E8%82%A1%E7%A5%A8%E5%88%9D%E7%BA%A7/">股票/股票初级</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <h1 id="股票初级"><a href="#股票初级" class="headerlink" title="股票初级"></a>股票初级</h1><h2 id="股票入门"><a href="#股票入门" class="headerlink" title="股票入门"></a>股票入门</h2><h3 id="股票投资五大流派"><a href="#股票投资五大流派" class="headerlink" title="股票投资五大流派"></a>股票投资五大流派</h3><ul>
<li>技术投资派：通过分析股票的价格走势，来预测股票未来涨跌</li>
<li>宏观投资派：逻辑是整个市场经济向好，股市就会向好，研究经济就可以指导股票投资</li>
<li>有效市场派：认为市场大部分时候对股票的定价是正确的</li>
<li>成长投资派（预测未来）：更关注公司未来是否有足够高的增长</li>
<li>价值投资派（把握现在）：看重现在公司是否有足够低的价格，低价高卖就是价值投资的本质<h3 id="价值投资"><a href="#价值投资" class="headerlink" title="价值投资"></a>价值投资</h3><h4 id="价值投资方法"><a href="#价值投资方法" class="headerlink" title="价值投资方法"></a>价值投资方法</h4><h5 id="捡烟蒂投资法"><a href="#捡烟蒂投资法" class="headerlink" title="捡烟蒂投资法"></a>捡烟蒂投资法</h5></li>
<li>本杰明.格雷厄姆：100%价值投资法，独创安全边际理论</li>
<li>烟蒂股：毫不起眼，甚至被抛弃的公司</li>
<li>需要的成本远低于本身的价值，继续下跌概率小，上涨概率大于下跌概率<h5 id="好公司投资法"><a href="#好公司投资法" class="headerlink" title="好公司投资法"></a>好公司投资法</h5></li>
<li>巴菲特：喜欢买好公司，偏爱食品行业</li>
<li>投资核心：找到好公司，低价买入</li>
<li>好公司的价值最终一定会显现在股价上</li>
<li>天时：看准入场时机，在股票市场便宜的时候进场买买买</li>
<li>一家公司的价值=现在公司的价值+未来公司能赚取的价值</li>
<li>市盈率(PE)=市值/净利润=买下公司需要的钱/每年能赚到的钱<br>PE越小，回本年限越短，越有投资价值</li>
<li>市净率（PB)=市值/净资产=买下公司需要的钱/属于公司自己的资产</li>
<li>PB越小，价格越低，越有投资价值</li>
<li>A股3000=沪深300+中证500+其他各类股票</li>
<li>找准入场时机：用沪深300和中证500估值处于低估，此时可入场<br>当沪深300和中证500中任一个PE，PB同时满足：</li>
</ul>
<p>1.PE处于近十年数值的0-50%<br>2.PB处于近十年数值的0-20%</p>
<ul>
<li>可入场投资的三种情况：<br>沪深300PE，PB同时满足条件，中证500没有满足<br>中证500PE，PB同时满足条件，沪深300没有满足<br>沪深300和中证500的PE，PB都同时满足条件</li>
<li>实操<br>理杏仁官网-搜索框输入“沪深300”查询该指数的数据<br>选“PE-TTM，加权平均值，十年”，可以看到PE图<br>PE－TTM：就是PE，TTM是一种更为精确计算PE的方式<br>加权平均值：把沪深３００的所有公司的市值相加除以净利润之和，相当于把这３００家公司“合并”成一家大公司计算PE<br>１０年：通常７－１０年，中国股市会经过一个完整的涨跌大周期，选择十年，能较客观地判断当前估值相对于过去１０年是高还是低<br>PE分位点：把过去１０年PE从小到大排序，当前PE所处位置<br>１００％表示当前PE是最大值，５０％表示当前PE处于中间位置<br>点击PB，可以查看PB图<br>搜索中证５００，查看PE，PB<br>判断某天是否适合入场，满足其中一个即可<br>沪深３００当天PE分位点＜５０％且PB分位点＜２０％，十年加权平均值<br>中证５００当天PE分位点＜５０％且PB分位点＜２０％，十年，加权平均值<br>地利：合理布局资金，建立自己的投资组合，规避风险<br>股市风险<br>系统性风险:整个股票市场存在的下跌风险，我们需先估值再入市<br>政策风险:政策改变导致企业生存条件变化<br>购买力风险:通货膨胀的风险<br>利率风险:市场利率会不断波动<br>非系统性风险:单只股票本身的风险<br>经营风险:公司经营的错误决策可能导致公司业绩大幅下滑<br>信用风险:公司违背信用所产生的风险<br>道德风险:违背道德事件，如三鹿的“毒奶粉事件”<br>规避风险<br>规避系统风险:先估值再入市<br>规避非系统风险:构建组合投资，资金分散到多个行业的多个股票上，鸡蛋不要放在同一个篮子里<br>回避风险时，并不是买的股票越多越科学，持有4-8只股票是比较经济，有效的做法<br>分散行业：同行业资金占比不要超过30%<br>人和：学会建设过硬的心理素质<br>白马组合<br>“好公司”投资法：赚业绩提升的钱<br>初筛白马股<br>买股票的条件<br>资金：投资的必要条件<br>心态：优秀投资者必备的素质<br>选股：开始买股票最重要的事情，一个好的股票，上涨的时候更多的回报，下跌的时候更大的耐心<br>头脑清晰，理性看待价格上涨<br>可能跟随价值上涨<br>可能只是围绕价值波动<br>白马股票：信息相对可靠，长期业绩优秀，投资回报率高<br>投资回报率：投资多少和能赚多少的比例<br>股票投资回报率就是投资收益率=[（卖出价格/买入价格）-1]<em>100%<br>年化复合收益率=【（卖出价格/买入价格）^（1/n）-1】</em>100%，n是投资年限<br>净资产收益率（ROE）=净利润/净资产，代表了企业赚钱能力<br>ROE越高，股票的年化收益率就越高<br>初筛条件<br>ROE连续7年&gt;=15%<br>上市时间&gt;5年，因为上市时间太短的话，业绩不够稳定<br>初筛方法</li>
</ul>
<p>1.打开同花顺旗下“i问财”网站（<a href="https://www.iwencai.com）" target="_blank" rel="noopener">https://www.iwencai.com）</a><br>2.文本框输入查询条件：2012年到2018年ROE大于等于15%，2019年06月30日ROE大于等于7.5%，上市时间大于5年，点击按钮“问一下财”，系统自动识别条件，并把输入的条件用“且”的关系关联起来，查出股票数据<br>3.初步筛选出了43个白马股了，可以导出数据<br>注意：财报披露是有延迟的（速记：1214）<br>第一季度结束后一个月内公布<br>第二个季度结束后两个月内公布<br>第三季度结束后一个月内公布<br>第四季度即年报是结束后4个月内公布<br>剔除周期股<br>经济周期：国民经济呈现扩张与紧缩交替波动变化<br>必然发生<br>循环往复：复苏，繁荣，衰退，萧条，类似四季循环<br>周期性行业：业绩紧跟经济周期起起伏伏，比如：汽车行业<br>非周期性行业：受经济周期影响较小，经营业绩更稳定，比如：医药行业，食品行业<br>周期股：受经济周期影响大，所处行业属于周期性行业<br>四类要避开的行业（周期性行业）<br>作为工业基础原材料的大宗商品相关行业（主要用于经济发展）<br>比如：采掘服务，钢铁，化工合成材料，化工新材料，石油矿业开采，化学制品等<br>航运业（运输货物）<br>比如：远洋运输，港口航运，机场航运，交通设备服务等<br>非生活必需品行业，及与之相关的行业（非必需）<br>如：国防军工，汽车零件，汽车，建筑材料，建筑装饰，房地产等<br>非银行的金融行业<br>如：证券，保险及其他<br>方法<br>1.“i问财”中初筛白马股，输入查询条件：2012年到2018年ROE大于等于15%，2019年06月30日ROE大于等于7.5%，上市时间大于5年，行业。点击按钮“问一下财”，查询数据并导出<br>2.剔除周期股，打开表格，把所属行业是周期性行业的数据剔除<br>剔除基本面转坏的股票<br>评估业绩下滑，四个指标有一个为负数就剔除该股<br>最近年度营收增长率 = （本年营业收入 - 去年营业收入） / 去年营业收入<br>最近年度净利润增长率 = （本年净利润 - 去年净利润） / 去年净利润<br>最近季度营收增长率 = （本季度营业收入 - 去年同季度营业收入） / 去年同季度营业收入<br>最近季度净利润增长率 = （本季度净利润 - 去年同季度净利润） / 去年同季度净利润<br>方法<br>1.“i问财”输入查询条件：2012年到2018年ROE大于等于15%，2019年6月30日ROE大于等于7.5%，营收增长率和净利润增长率，上市时间大于5年，行业，2018年营收增长率和净利润增长率<br>2.去掉不必要的列，导出数据<br>3.导出的表格筛选行业，去掉周期性行业<br>4.筛选出最近季度和最近年度的营收增长率和净利润增长率大于0，排除掉小于0的即业绩下滑的股<br>财报三表分析<br>财报：记录公司所有经营事务的报表，分为季度报表，半年报表，年度报表<br>利润表（损益表）：体现公司在一段时间内是赚钱还是亏钱<br>营业利润=营业收入 - 营业成本 - 三费<br>营业收入：卖东西的收入，只要卖出东西，无论是否收到钱都计入<br>营业成本：购买生产货物的原材料等所付出的钱<br>三费：管理费用，销售费用，财务费用<br>净利润 = 营业利润 - 所得税<br>资产负债表<br>记录某时公司有多少钱，财，物以及欠别人多少钱<br>现金流量表<br>公司现金流入流出情况，开支流水账，记录花出去多少钱，收到多少钱<br>经营活动现金流量<br>利润表<br>投资现金流量<br>资产<br>筹资活动现金流量<br>负债<br>识别信息相对可靠<br>如何识别收入美化，识别真货假卖<br>小熊定理1：识别真货假卖，是否存在连续两年应收账款增长幅度大于营收增长幅度，存在则不通过检验<br>实操方法<br>理杏仁-输入查询的某股票<br>利润表-我们需要了解最近3年增长情况，所以查询最近4年数据<br>找到营业收入，把数据复制进表格中,计算每年营业收入增长金额<br>资产负债表-应收账款-数据复制进表格，计算每年应收账款增长金额<br>每年应收账款增长金额-营业收入增长金额算出结果，如果连续两年结果大于0，表示连续两年应收账款增长幅度大于营业收入增长幅度，则不通过小熊定理1，要当心<br>如何识别资产美化<br>资产负债表：记录公司某时有多少钱财物，欠多少钱<br>资产<br>货币资金（现金）：顾客找零，临时补货等<br>应收账款：白条，别人欠你的钱<br>存货：原材料和耗材等<br>预付款项：预先支出房租等<br>固定资产：设备，厂房，土地等<br>负债<br>应付款项：欠供应商的贷款<br>短期借款：如借朋友的钱，一年内还<br>长期借款：如借银行的钱，为期5年<br>所有者权益（净资产）：属于公司自己的<br>资本公积金<br>未分配利润<br>核心：资产=负债+所有者权益<br>问题主要在存货上，存货不仅指生产出的货物，还包括生产用的原材料，生产过程中的半成品，财报的存货只能看到资金总额，这就给了别有用心的公司一个机会<br>识别存货造假<br>小熊定理2：连续两年存货增长大于营业收入增长，这家公司存货可能有问题<br>实操方法<br>1.理杏仁网站查询某股票信息，在利润表中找到连续4年的营业收入数据，并计算出营业收入增长金额<br>2.在资产负债表中找到连续4年的存货数据，并计算存货增长金额<br>3.验证小熊定理2，比较每年营业收入增长金额和存货增长的差异，用当年存货增长减去营业收入增长金额<br>结果大于0，说明存货涨幅更大，小于0则说明营业收入丈夫更大<br>当出现连续2年结果都大于0，说明公司连续两年存货增长金额大于营业收入增长金额，不通过小熊定理2，要当心了<br>识别资产安全（鉴别公司是否有破产的风险）<br>小熊定理3：如果一家公司的流动负债远大于流动资产的话，说明这家公司已经非常接近破产了<br>流动资产：一年内可以变现的资产，如货币资金，存货，预付款项<br>流动负债：一年内必须要还的钱，如应付账款，短期借款<br>流动比率 = 流动资产 / 流动负债<br>如果流动比率小于1，说明流动资产小于流动负债，危险的信号<br>实操方法<br>理杏仁-查询股票资产负债表中最近3年的流动比率，最近3年有2年都小于1就要当心了<br>i问财也可以查询<br>除银行股外，所选公司只要有一个定理不能通过检验，就要剔除<br>小熊定理1能看出公司是否有美化收入嫌疑<br>小熊定理2能看出公司是否有美化资产的嫌疑<br>小熊定理3能轻松鉴别公司是否有破产风险<br>自由现金流如此重要，加分项<br>小熊定理4：当一家公司经营活动现金流量净额远大于净利润，说明这家公司可能有隐藏的盈利能力，有可能是座金矿<br>理杏仁-查询公司-现金流量表-近三年经营活动产生的现金流量净额-和净利润对比<br>小熊定理5：自由现金流是衡量公司现金流情况的指标，代表公司真正能自由运用的资金，比净利润更真实，更难作假<br>自由现金流=经营活动产生的现金流量净额-资本开支<br>资本开支是现金流量表中的购建固定资产，无形资产和其他长期资产支付的现金<br>理杏仁-查询公司-财务指标-现金流量里面的自由现金流大于0就加分了<br>实操：构建白马组合<br>筛选步骤<br>投资回报率高<br>ROE连续7年大于等于15%，上市时间大于5年<br>长期业绩优秀<br>剔除周期股，看行业<br>剔除当下业绩显现下滑迹象的公司<br>信息相对可靠<br>小熊三大定理检验经过筛选的股票，财报信息是否可靠<br>判断股票价格<br>股票的贵与便宜相对价值而言的，估值体现价格和价值的关系<br>PE分位点和PB分位点小于50%<br>理杏仁-查询公司-价值分析-PE分位点和PB分位点（10年数据）历史看前复权，现在看股价<br>怎么买<br>PE分位点升序排列，优先买PE分位点低的，平均分配资金<br>PE升序，整理筛选出来的公司<br>找出它们当时的股价，计算购买一手的价格<br>根据资金量分配选择股票数量，同行业不能超过30%，行业看二级行业<br>同行业股票数量不超过30%，即公司数量不超过30%<br>同行业资金占比也不超过30%<br>卖出<br>股票价格高于价值了，你贵了<br>基本面转坏了，你变了，每年一次筛选对比<br>发现更好更便宜的，别人比你更好了<br>稳住心态，长期持有<br>短期可能下跌，长期价格回归价值<br>总结<br>PE分位点升序排列，优先买PE分位点低的，平均分配资金<br>每年筛选一次对比调仓，贵了，变了就剔除<br>干货补充<br>容易出白马股的行业，一般来说，有护城河的公司都会有较高的投资回报率，也有不错的业绩。<br>护城河<br>无形资产护城河：看不见摸不到的资产<br>品牌护城河：大家耳熟能详的各种品牌，就是公司想要打造的品牌护城河<br>品牌溢价护城河：可以卖得比同类产品贵的能力，就是品牌溢价能力，这种公司就有品牌 溢价护城河。<br>有这种护城河的公司产品，即使价格卖得高卖得贵，消费者为了这个牌子也 会买，比如说贵州茅台，比如说苹果手机。<br>品牌搜索护城河：有这种护城河的公司产品，在我们想买什么的时候，会出现在我们脑子里。<br>比如说我们想买牛奶，第一反应可能是伊利，可能是蒙牛<br>专利护城河：专利就是只有我有的权利<br>有专利护城河的公司，就是那种可以持续性研发出产品，并且申请出专利的 公司，比如说大型药厂<br>政府授权护城河:政府授权的是你能不能进入这个行业<br>比较典型的有这个护城河的公司是赌场，在内地，赌场就禁止经营，而澳门现在也不会批准建新的赌场，所以，澳门那几家赌场的竞争对手并不会增加！<br>转换成本护城河<br>如果一个产品的用户，更换这个产品时需要付出很多代价或成本，我们就说 这个产品具有转换成本，这家公司具有转换成本护城河。<br>如果一家医院要换信息系统，它会面临怎样的麻 烦？<br>数据转移<br>医生，护士学习新系统<br>核对旧病例，导入是否完整<br>网络效应护城河<br>严格来说是转换成本的一种。 因为互联网的日益发达，受到了越来越多的重视，很典型的公司就是腾讯控股。<br>像微信这种，随着使用人数的增多，产品价值越高的公司，就是有网络效应 护城河的公司。<br>规模效应护城河<br>规模带来的效应，生产数量越多固定资产成本越低<br>固定成本（厂房设备等固定资产）的总额不会随着成品数量变化，但是 随着生产数量的增多，每个产品中固定成本的量会变小。<br>易出护城河的行业（速记：白衣小软妹），可以优先选择好行业里的公司<br>白酒行业、医药行业、软件行业、媒体行业、消费行业<br>通过估值四象限快速判断一家公司的状态<br>PE 是从企业盈利的角度考察现在的股价是不是合理，而 PB 是从企业的净资产角度考察现在的股价是不是合理。粗略来分，我们可以把大于 50%的分位点称为高，把小于 50%的分位点称 为低。<br>估值四象限<br>第一象限：高 PB，高 PE<br>泡沫象限，远离<br>pe、pb 越高，说明整个 市场越贵，下跌的可能越大。<br>被疯狂炒作的个股，比方说 2015 年妖股第一名暴风集团。<br>第二象限：低 PB，高 PE，分析公司业绩未来是否有变好的可能<br>企业自身运营不善，避开<br>周期性行业低估期，买入持有至行业回暖，也有可观的收益<br>第三象限：低 PB，低 PE，大概率是比较合适的投资机会，辨别PE是真低还是价低（盈利能力下降，财报是否体现）<br>市场处于熊市的末期，此时由于熊市长期的下跌导致大家的投 资情绪都过于悲观，会使得很多股票的价格跌到实际价值以下，出现大量的低 PB、低 PE 股票，这时候意味着，投资的机会来了。<br>企业遭遇经营困境、或行业政策、竞争态势等外部环境发生 不利变化。由于市场有时会提前并且迅速做出反应，导致公司股价下降，市 值变得很低，自然的 PB 就会很低。<br>PE“真低”<br>财报中的数据已经显示出公司盈利能力的下降，投资者们 看到公司盈利下降了，纷纷卖出，公司市值必然下降，市值与净利润同时下降导 致的低 PE，就是 PE“真低”。只要公司未来盈利能力可以恢复，就是好的入场 时机。<br>PE“假低”<br>公司业绩的披露有滞后性，而 PE 的计算又是基于最近披露的净利润， 所以当最近一期公司财报并没有显示出业绩下滑，也就是说净利润仍然是高的， pe=市值/净利润，公司的 PE 依然很低。<br>一旦未来公司财报显示出公司的盈利能力快速下滑，那很可能会出现股价越 跌，PE 越高的情况。<br>因为虽然股价在下跌，但盈利下跌速度更快，可能直接跌成负的了。 这就是我们必须尽力避免的低价值陷阱，也就是 PE“假低”。<br>第四象限：高 PB，低 PE<br>英雄象限，避开<br>PB 高，意味着投资者们特别看好公司的发展，对公司的盈利能力有着很高的期待，毕竟市场给予了比净资产高很多倍的溢价嘛！<br>一旦公司盈利不达预期，曾经追捧的那些投资者们就会纷纷弃他而去， 导致股价下跌。<br>PB高，不用管PE低不低，直接避开<br>分红过后需要除权除息，所以股价必然下降<br>分红<br>一种是上市公司直接给股东送股票，这种称为“股票股利”<br>公司的股价=总市值/总股数，总股数增加了，每股的价格当然也会减少，这种行为就叫做除权。<br>另外一种是现金分红，就是公司直接给股东发现金，这种称为“现金股利”<br>发现金股利的时候，会从股价中将这一部分股利扣除，这就叫做除息<br>填权<br>公司的价值短期内变动幅度有限，只要大家看好公司的价值，股 价降低了公司价值没有变，当然会有人去买，因此，除权除息后，股价都会涨回 和原来差不多，这个过程称之为填权。<br>红利税<br>红利税并不是在分红派息那天扣除的，而是在卖出股票的时候 扣除，只要持股超过一年，就不需要缴纳，可见，咱们股市的监管方，也是希望 大家做长期的价值投资者，而非炒作的投机者。<br>什么公司不能碰<br>第一种，大品牌更可靠<br>首先，知名企业有着很大的曝光率，更容易被发现财务造假。<br>其次，他们财务造假的成本太高。<br>第二种，不要 ST。股票名称前带有“ST”、“<em>ST”、“SST”、“S</em>ST”、“NST”标识的， 一定不要投！<br>有上述标识的股票意味着，该公司至少连续两年亏损，将被证监会处理，面 临整改或者退市。<br>ST 代表的就是亏损股<br>第三种，曾经出现过违反道德规范、财报作假等重大丑闻的，被证监会立案调查 还未有结果的公司不要买。<br>只要在百度中用“公司名+证监会”， 这一组关键词搜索，就能看到相关的信息。<br>便宜组合<br>“捡烟蒂”投资法<br>便宜组合：赚股价回升的钱，不太挑剔股票质量，主要看折扣<br>筛选指标<br>双低组合，低PE低PB<br>0&lt;PE&lt;10<br>0&lt;PB&lt;1.5<br>大方分钱<br>股息率&gt;3%<br>股息率=公司过去一年的累计现金分红/公司市值，A股公司平均股息率约为3%<br>实操筛选<br>理杏仁-选股-基本面选股<br>选择范围-A股市场-沪深两市<br>条件设置-基本指标-点击筛选便宜组合的三个指标<br>市盈率选PE-TTM（扣非）<br>扣非：扣除非经常性损益（利润表中一部分和公司正经运营业务无关）<br>不含商誉的PB<br>公司收购其他公司时超过净资产的部分，是资产的一部分，但本质不是真正的资产<br>股息率<br>两个选股条件<br>PB（不含商誉）分位点（10年），股价<br>时间选择最近时间<br>按照筛选条件，选好最大值最小值，开始选股，最后导出文件<br>排序筛选法<br>PE，PB升序排列，股息率降序排列，三个指标排名加总，算出总排名<br>实操<br>分别在PE，PB，股息率右边增加列PE排名，PB排名，股息率排名。再加一列综合排名<br>用RANK.EQ函数计算PE排名，PB排名，股息率排名<br>数值-想要排序的那个数值<br>引用-数值所在的数据集合<br>排序方式<br>1：升序<br>0：降序<br>计算综合排名：把PE排名，PB排名，股息率排名三个排名相加<br>综合排名升序排列<br>具体筛选<br>8-10只构建便宜组合<br>根据综合排名从低到高依次挑选，行业要分散：同一行业公司不要超过30%<br>用PB分位点进一步挑选低估股票，PB分位点&lt;20%加入组合<br>PB（不含商誉）分位点（10年）：把过去10年的PB从小到大排列，现在PB所在的位置<br>PB分位点&lt;20%，现在是低估，适合买入<br>PB分位点&gt;50%，现在是高估，不适合买入<br>资金分配<br>根据资金量确定便宜组合的股票数量<br>同一行业股票数量和资金不超过30%<br>资金均分<br>确定价格最高的买一手，其余股票金额往这个金额上靠就可以了<br>筛选数量不够时<br>放宽筛选条件<br>寻找别的投资机会<br>持币观望，等待入场时机<br>被动投资<br>每隔半年调仓一次，将组合整体估值降低<br>每隔半年重新筛一次便宜组合<br>将最新筛出的便宜组合和原来组合对比<br>新旧组合重合部分保留<br>卖掉旧组合里有，但新组合里没有的股票<br>补入就组合里没有，但新组合里有的股票<br>清楚投资原理，投资方法<br>了解攀升强度，明白回撤幅度<br>具备耐心和坚持才配得上优厚的回报<br>轻松实践<br>买股票常识<br>A股交易时间：周一到周五每天4小时交易时间（法定休假日除外），上午9:30-11:30，下午13:00-15:00<br>K线图（蜡炬图）<br>蜡炬图<br>阳线：红色的，代表股价上涨，当天收盘价大于开盘价即收盘价在上开盘价在下<br>阴线：绿色的，代表股价下跌，当天收盘价小于开盘价即开盘价在上收盘价在下<br>阳线和阴线都有上影线和下影线分部表示最高价和最低价<br>计算周期<br>日K线：最常用，以当天开盘价，收盘价，最高价，最低价来画的Ｋ线图<br>周K线：以周一开盘价，周五收盘价，全周最高价和最低价来画的K线图<br>月K线：以一个月第一个交易日的开盘价，最后一个交易日收盘价，全月最高价和最低价来画的K线图<br>季K线<br>年K线<br>每根Ｋ线下面对应有一条红色或绿色的条形图，代表交易量（一段时间内成交的股票数量，受供求关系影响）<br>交易单位<br>以“手”为单位，１手＝100股, 1-99股称为零股<br>买入最低单位为手<br>分红送股可能有零股，卖出可以有零股，但是零股必须一次性卖出<br>A股交易费用（沪市和深市）<br>无论是基金开的还是咱们股初扫码开的华泰优惠开户，都是调整成股票万分之1.8，起点5元， 基金万分之1，起点0.1元<br>印花税<br>国家税务局<br>卖出收，成交金额的千分之一<br>过户费<br>中登公司<br>买入和卖出都收，成交金额的千分之0.02<br>佣金<br>证交所证券公司<br>买入和卖出都收，最高千分之3，最低5元<br>报价方式<br>限价委托（常用）<br>用户限定价格，价格可控，交易时间不可控<br>好处：价格可控，当股价到达了设置的价格成交<br>坏处：如果股价始终高于限定的价格，就需要耐心等待，也可能当天成交不了<br>市价委托（不常用）<br>只指定交易数量，价格不可控，交易时间可控<br>好处：即时成交<br>坏处：成交价格可能偏贵<br>特色<br>涨跌停板制度<br>股票上涨幅度和下跌幅度只能是上一个交易日收盘价的10%<br>ST开头的股票，每日涨跌停幅度限制只有5%<br>新股首日上市股价涨幅不受10%限制，但是最高幅度不能超过发行价的44%<br>交易制度：T+1交易，忌频繁交易<br>当天买入的证券不能当天卖出，第二天才可以卖出<br>当天卖出股票收回的资金只能用来买新的股票，不能提取。第二天才可提取<br>人和：股海沉浮，锦囊妙计<br>1.贪多嚼不烂<br>入门简单，严格执行投资计划，会获得合理收益的。精通难，想要超额收益，需要付出超额努力<br>2.笑看涨跌，波澜不惊<br>面对股价大幅度下跌，要相信组合的力量，不要每天看盘，一个月一次就够了<br>3.保持耐心，长期持有<br>时间是财富自由的基本条件#</p>

    

        <a href="/2021/06/22/%E8%82%A1%E7%A5%A8/%E8%82%A1%E7%A5%A8%E5%88%9D%E7%BA%A7/" class="post-more waves-effect waves-button">
            Continue reading...
        </a>
    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-商业/行业调研步骤"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2021-06-22 23:55:01" datetime="2021-06-22T15:55:01.006Z"  itemprop="datePublished">2021-06-22 </time>

        


    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2021/06/22/%E5%95%86%E4%B8%9A/%E8%A1%8C%E4%B8%9A%E8%B0%83%E7%A0%94%E6%AD%A5%E9%AA%A4/">商业/行业调研步骤</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <h2 id="基本的研究框架"><a href="#基本的研究框架" class="headerlink" title="基本的研究框架"></a>基本的研究框架</h2><p>一般常见的研究框架包括以下这些：</p>
<p>产品</p>
<p>这个行业的主要产品是什么？</p>
<p>产品的主要形态是什么？</p>
<p>满足了用户哪一方面的需求？</p>
<p>产品的替代品包括什么？</p>
<p>产品的关键技术是哪一项？</p>
<p>产品的成本结构如何？</p>
<p>市场</p>
<p>公司的市场定位？</p>
<p>公司的主要用户？</p>
<p>市场空间有多大？</p>
<p>近几年的市场增长率有多高？</p>
<p>预计未来几年的市场增速如何？</p>
<p>市场的主要玩家是谁？</p>
<p>行业概括</p>
<p>基本的行业术语</p>
<p>行业的发展历程和变迁</p>
<p>行业的监管情况和主要政策是什么？</p>
<p>行业发展的有利因素和不利因素</p>
<p>行业发展的瓶颈</p>
<p>行业目前所处的周期</p>
<p>行业的供应链情况</p>
<p>用PESTEL模型分析，这个行业如何？（PESTEL模型如下）</p>
<p><em>P</em>：政治因素，是否是公有设施行业？是否受到政策和监控的严控？如房地产</p>
<p><em>E</em>：经济因素，哪些经济因素影响了这个行业的发展？如奢侈品</p>
<p><em>S</em>：社会因素，社会风俗和思想开放程度对这个行业有多大的影响？如医美</p>
<p><em>T</em>：技术因素，技术是如何影响这个行业的？如手机</p>
<p><em>E</em>：环境因素，环保政策和环保理念如何影响行业发展？如新能源汽车</p>
<p><em>L</em>：法律因素，某些法律法规的出台对行业的影响，如广告法影响自媒体等。</p>
<p>竞争</p>
<p>行业的竞争情况如何，是完全竞争？寡头垄断？还是寡头竞争？</p>
<p>业内几个主要玩家的盈利模式分别是怎样的？</p>
<p>在竞争胜出的关键行业因素是什么？</p>
<p>该行业是否受到海外竞争的压力</p>

    

        <a href="/2021/06/22/%E5%95%86%E4%B8%9A/%E8%A1%8C%E4%B8%9A%E8%B0%83%E7%A0%94%E6%AD%A5%E9%AA%A4/" class="post-more waves-effect waves-button">
            Continue reading...
        </a>
    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-面试/要点整理/etcd&amp;zookeeper"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2020-03-23 16:14:00" datetime="2020-03-23T08:14:00.000Z"  itemprop="datePublished">2020-03-23 </time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2020/03/23/%E9%9D%A2%E8%AF%95/%E8%A6%81%E7%82%B9%E6%95%B4%E7%90%86/etcd&zookeeper/">【第一课】etcd&amp;zookeeper</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <h3 id="etcd-和zookeeper"><a href="#etcd-和zookeeper" class="headerlink" title="etcd 和zookeeper"></a>etcd 和zookeeper</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">etcd是一个高可用的键值存储系统，主要用于共享配置和服务发现。etcd是由CoreOS开发并维护的，灵感来自于 ZooKeeper 和 Doozer，它使用Go语言编写，并通过Raft一致性算法处理日志复制以保证强一致性。Raft是一个来自Stanford的新的一致性算法，适用于分布式系统的日志复制，Raft通过选举的方式来实现一致性，在Raft中，任何一个节点都可能成为Leader。Google的容器集群管理系统Kubernetes、开源PaaS平台Cloud Foundry和CoreOS的Fleet都广泛使用了etcd。</span><br><span class="line"></span><br><span class="line">etcd 集群的工作原理基于 raft 共识算法 (The Raft Consensus Algorithm)。etcd 在 0.5.0 版本中重新实现了 raft 算法，而非像之前那样依赖于第三方库 (https:&#x2F;&#x2F;github.com&#x2F;goraft&#x2F;raft) 。raft 共识算法的优点在于可以在高效的解决分布式系统中各个节点日志内容一致性问题的同时，也使得集群具备一定的容错能力。即使集群中出现部分节点故障、网络故障等问题，仍可保证其余大多数节点正确的步进。甚至当更多的节点（一般来说超过集群节点总数的一半）出现故障而导致集群不可用时，依然可以保证节点中的数据不会出现错误的结果。</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Zookeeper是一个用户维护配置信息、命名、分布式同步以及分组服务的集中式服务框架，它使用Java语言编写，通过(http:&#x2F;&#x2F;www.stanford.edu&#x2F;class&#x2F;cs347&#x2F;reading&#x2F;zab.pdf)协议来保证节点的一致性。因为Zookeeper是一个CP型系统，所以当网络分区问题发生时，系统就不能注册或查找服务。</span><br><span class="line"></span><br><span class="line">etcd是一个用于共享配置和服务发现的高可用的键值存储系统，使用Go语言编写，通过Raft来保证一致性，有基于HTTP+JSON的API接口。etcd也是一个强一致性系统，但是etcd似乎支持从non-leaders中读取数据以提高可用性；另外，写操作仍然需要leader的支持，所以在网络分区时，写操作仍可能失败。</span><br><span class="line"></span><br><span class="line">在原生接口和提供服务方式方面，etcd更适合作为集群配置服务器，用来存储集群中的大量数据。方便的REST接口也可以让集群中的任意一个节点在使用Key&#x2F;Value服务时获取方便。ZooKeeper则更加的适合于提供分布式协调服务，他在实现分布式锁模型方面较etcd要简单的多。所以在实际使用中应该根据自身使用情况来选择相应的服务。</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">并且在面对网络分区的时候，为了保持一致性，读取的可用性是可以牺牲的。</span><br></pre></td></tr></table></figure>



<h3 id="能否用redis替代etcd"><a href="#能否用redis替代etcd" class="headerlink" title="能否用redis替代etcd"></a>能否用redis替代etcd</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">不能 </span><br><span class="line">1、redis 没有版本的概念，历史版本数据在大规模微服务中非常有必要，对于状态回滚和故障排查，甚至定锅都很重要</span><br><span class="line">2、redis 的注册和发现目前只能通过 pub 和 sub 来实现，这两个命令完全不能满足生产环境的要求，具体原因可以 gg 或看源码实现</span><br><span class="line">3、etcd 在 2.+版本时，watch 到数据官方文档均建议再 get 一次，因为会存在数据延迟，3.+版本不再需要，可想 redis 的 pub 和 sub 能否达到此种低延迟的要求</span><br><span class="line">4、楼主看到的微服务架构应该都是将 etcd 直接暴露给 client 和 server 的，etcd 的性能摆在那，能够承受多少的 c&#x2F;s 直连呢，更好的做法应该是对 etcd 做一层保护，当然这种做法会损失一些功能</span><br><span class="line">5、redis 和 etcd 的集群实现方案是不一致的，etcd 采用的是 raft 协议，一主多从，只能写主，底层采用 boltdb 作为 k&#x2F;v 存储，直接落盘</span><br><span class="line">6、redis 的持久化方案有 aof 和 rdb，这两种方案在宕机的时候都或多或少的会丢失数据</span><br><span class="line"></span><br><span class="line">总结，瑞迪斯从来没有想过抢 etcd 在服务注册和发现的饭碗，目前的架构来说也抢不动，在缓存方面目前在性能和功能也无出其右； etcd 只关注在服务注册与发现方面，非要当做 k&#x2F;v 存储来用（丢弃 watch 特性而言）也可以用，性能也不错，但只能说你选错对象了</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pubsub 不会保留历史信息, 收到就行, 收不到也不会重复通知, 换句话说, 你必须客户端永远在线, 才能收到 sub 的信息, 一旦客户端网络短时间出问题, 就收不到变更通知了, redis 可以做, 但是不是用 pubsub 做, 而是要自己做一个定时的轮询, 时刻保持客户端信息最新</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CAP： </span><br><span class="line">C：Consistency 即一致性</span><br><span class="line">A：Availability 即可用性</span><br><span class="line">P：Partiton tolerence 即分区容忍性</span><br><span class="line"></span><br><span class="line">etcd是CP的 而redis是AP的</span><br></pre></td></tr></table></figure>


    

        <a href="/2020/03/23/%E9%9D%A2%E8%AF%95/%E8%A6%81%E7%82%B9%E6%95%B4%E7%90%86/etcd&zookeeper/" class="post-more waves-effect waves-button">
            Continue reading...
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/golang/" rel="tag">golang</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-面试/要点整理/go"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2020-03-19 16:14:00" datetime="2020-03-19T08:14:00.000Z"  itemprop="datePublished">2020-03-19 </time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2020/03/19/%E9%9D%A2%E8%AF%95/%E8%A6%81%E7%82%B9%E6%95%B4%E7%90%86/go/">【第一课】golang常考知识点</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <h3 id="数组和切片的区别"><a href="#数组和切片的区别" class="headerlink" title="数组和切片的区别"></a>数组和切片的区别</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">数组类型的值（以下简称数组）的长度是固定的，而切片类型的值（以下简称切片）是可变长的。</span><br><span class="line">我们其实可以把切片看做是对数组的一层简单的封装，因为在每个切片的底层数据结构中，一定会包含一个数组。数组可以被叫做切片的底层数组，而切片也可以被看作是对数组的某个连续片段的引用。</span><br></pre></td></tr></table></figure>



<h3 id="golang中的引用类型"><a href="#golang中的引用类型" class="headerlink" title="golang中的引用类型"></a>golang中的引用类型</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在golang中只有三种引用类型它们分别是切片slice、字典map、管道channel。其它的全部是值类型，引用类型可以简单的理解为指针类型，它们都是通过make完成初始化</span><br></pre></td></tr></table></figure>



<h3 id="进程-线程-和-协程"><a href="#进程-线程-和-协程" class="headerlink" title="进程 线程 和 协程"></a>进程 线程 和 协程</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> 进程、线程(内核级线程)、协程(用户级线程)</span><br><span class="line"></span><br><span class="line">协程是一种用户态的轻量级线程，协程的调度完全由用户控制（进程和线程都是由cpu 内核进行调度）。协程拥有自己的寄存器上下文和栈。协程调度切换时，将寄存器上下文和栈保存到其他地方，在切回来的时候，恢复先前保存的寄存器上下文和栈，直接操作栈则基本没有内核切换的开销，可以不加锁的访问全局变量，所以上下文的切换非常快。</span><br><span class="line">对于 进程、线程，都是有内核进行调度，有 CPU 时间片的概念，进行 抢占式调度（有多种调度算法）</span><br><span class="line">对于 协程(用户级线程)，这是对内核透明的，也就是系统并不知道有协程的存在，是完全由用户自己的程序进行调度的，因为是由用户程序自己控制，那么就很难像抢占式调度那样做到强制的 CPU 控制权切换到其他进程&#x2F;线程，通常只能进行 协作式调度，需要协程自己主动把控制权转让出去之后，其他协程才能被执行到。</span><br><span class="line"></span><br><span class="line">内存消耗方面</span><br><span class="line">每个 goroutine (协程) 默认占用内存远比 Java 、C 的线程少。</span><br><span class="line">goroutine：2KB（官方）</span><br><span class="line">线程：8MB（参考网络）</span><br><span class="line"></span><br><span class="line">线程和 goroutine 切换调度开销方面</span><br><span class="line">线程&#x2F;goroutine 切换开销方面，goroutine 远比线程小</span><br><span class="line">线程：涉及模式切换(从用户态切换到内核态)、16个寄存器、PC、SP...等寄存器的刷新等。</span><br><span class="line">goroutine：只有三个寄存器的值修改 - PC &#x2F; SP &#x2F; DX.</span><br></pre></td></tr></table></figure>



<h3 id="Go-语言对测试函数的名称和签名都有哪些规定？"><a href="#Go-语言对测试函数的名称和签名都有哪些规定？" class="headerlink" title="Go 语言对测试函数的名称和签名都有哪些规定？"></a>Go 语言对测试函数的名称和签名都有哪些规定？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">对于功能测试函数来说，其名称必须以Test为前缀，并且参数列表中只应有一个*testing.T类型的参数声明。</span><br><span class="line">对于性能测试函数来说，其名称必须以Benchmark为前缀，并且唯一参数的类型必须是*testing.B类型的。</span><br><span class="line">对于示例测试函数来说，其名称必须以Example为前缀，但对函数的参数列表没有强制规定。</span><br></pre></td></tr></table></figure>



<h3 id="go的性能分析"><a href="#go的性能分析" class="headerlink" title="go的性能分析"></a>go的性能分析</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">runtime&#x2F;pprof；net&#x2F;http&#x2F;pprof；runtime&#x2F;trace；</span><br><span class="line">$ go tool pprof cpuprofile.out</span><br><span class="line">Type: cpu</span><br><span class="line">Time: Nov 9, 2018 at 4:31pm (CST)</span><br><span class="line">Duration: 7.96s, Total samples &#x3D; 6.88s (86.38%)</span><br><span class="line">Entering interactive mode (type &quot;help&quot; for commands, &quot;o&quot; for options)(pprof)</span><br></pre></td></tr></table></figure>




    

        <a href="/2020/03/19/%E9%9D%A2%E8%AF%95/%E8%A6%81%E7%82%B9%E6%95%B4%E7%90%86/go/" class="post-more waves-effect waves-button">
            Continue reading...
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/golang/" rel="tag">golang</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-面试/要点整理/消息队列"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2020-03-17 16:14:00" datetime="2020-03-17T08:14:00.000Z"  itemprop="datePublished">2020-03-17 </time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2020/03/17/%E9%9D%A2%E8%AF%95/%E8%A6%81%E7%82%B9%E6%95%B4%E7%90%86/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">【第一课】消息队列</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <h3 id="消息队列的使用场景"><a href="#消息队列的使用场景" class="headerlink" title="消息队列的使用场景"></a>消息队列的使用场景</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 解耦</span><br><span class="line">2. 异步</span><br><span class="line">3. 削峰</span><br></pre></td></tr></table></figure>



<h3 id="怎么保证消息不会丢失"><a href="#怎么保证消息不会丢失" class="headerlink" title="怎么保证消息不会丢失"></a>怎么保证消息不会丢失</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">保证消息的幂等性</span><br></pre></td></tr></table></figure>



<h3 id="推和拉模式分别有什么优势和劣势"><a href="#推和拉模式分别有什么优势和劣势" class="headerlink" title="推和拉模式分别有什么优势和劣势"></a>推和拉模式分别有什么优势和劣势</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Push方式：</span><br><span class="line">优点：有消息就推给消费者。延迟小,几乎可以做到实时。等等。。。。</span><br><span class="line"></span><br><span class="line">缺点：Server端接收到消息后，主动把消息推送给Client端，实时性高。对于一个提供队列服务的Server来说，用Push方式主动推送有很多弊端；首先是加大Server端的工作量，进而影响Server的性能，其次Client的处理能力各不相同，Client的状态不受Server控制，如果Client不能及时处理Server推送过来的消息，会造成各种潜在问题。</span><br><span class="line"></span><br><span class="line">菠萝科技注：意思是1 加大server(broker)工作量,影响性能。2 有的消费者机器配置好处理能力强,有的配置低处理能力低,但是server推相同数量级消息给消费者，就会导致消费者强的等待,弱的处理效率跟不上,从而导致崩溃。3server资源相比消费者的资源肯定是更宝贵  4总结下就是客户端慢消费(设计到io等耗时操作)时会放大缺点。</span><br><span class="line"></span><br><span class="line">Pull方式：</span><br><span class="line">优点：对比push优点就是消费者可以根据自己能力拉取消息处理。。。</span><br><span class="line"></span><br><span class="line">缺点：Client端循环地从Server端拉取消息，主动权在Client手里，自己拉取到一定量消息后，处理妥当了再接着取。Pull方式的问题是循环拉取消息的间隔不好设定，间隔太短就处在一个“忙等”的状态，浪费资源；每个Pull的时间间隔太长，Server端有消息到来有可能没有被及时处理。</span><br><span class="line"></span><br><span class="line">菠萝科技注：假如处理完消息后，现在空闲，设定多久去server再拉消息？主要问题就是消息处理延迟忙等。server没消息时,但是消费者因为是定时去pull，导致空pull。</span><br></pre></td></tr></table></figure>



<h3 id="设计一个消息队列"><a href="#设计一个消息队列" class="headerlink" title="设计一个消息队列"></a>设计一个消息队列</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.Producer(消息生产者)：发送消息到Broker。</span><br><span class="line">2.Broker(服务端)：Broker这个概念主要来自于Apache的ActiveMQ，特指消息队列的服务端。主要功能就是：把消息从发送端传送到接收端，这里会涉及到消息的存储、消息通讯机制等。</span><br><span class="line">3.Consumer(消息消费者)：从消息队列接收消息，consumer回复消费确认。</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">为了实现上述消息队列的基础功能：</span><br><span class="line">1）消息的传输</span><br><span class="line">2）存储</span><br><span class="line">3）消费</span><br><span class="line"></span><br><span class="line">就需要涉及到如下三个方面的设计：</span><br><span class="line">1）通信协议 统一格式</span><br><span class="line">2）存储选择 速度来看，文件系统&gt;分布式KV（持久化）&gt;分布式文件系统&gt;数据库，而可靠性却截然相反。</span><br><span class="line">3）消费关系维护 单播，就是点到点；而广播，是一点对多点。</span><br><span class="line"></span><br><span class="line">消息的顺序</span><br><span class="line">投递可靠性保证</span><br><span class="line">消息持久化</span><br><span class="line">支持不同消息模型</span><br><span class="line">多实例集群功能</span><br><span class="line">事务特性等</span><br></pre></td></tr></table></figure>

<h3 id="rabbit-MQ"><a href="#rabbit-MQ" class="headerlink" title="rabbit MQ"></a>rabbit MQ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">由Erlang语言开发，继承其天生的并发性，稳定性和安全性有保障</span><br><span class="line">协议： AMQP（Advanced Message Queuing Protocol）高级消息队列协议，是一个异步消息传递所使用应用层协议规范，</span><br><span class="line"></span><br><span class="line">Server : 又称Broker, 接受客户端连接, 实现AMQP实体服务</span><br><span class="line">Connection : 连接, 应用程序与Broker的网络连接</span><br><span class="line">Channel : 网络信道, 几乎所有的操作都在Channel中进行, Channel是进行消息读写的通道。客户端可以建立多个Channel, 每个Channel代表一个会话任务。</span><br><span class="line">Message : 消息, 服务器和应用程序之间传送的数据, 有Properties和Body组成。Properties可以对消息进行修饰, 比如消息的优先级, 延迟等高级特性; Body就是消息体内容。</span><br><span class="line">Virtual Host : 虚拟地址, 用于进行逻辑隔离, 最上层的消息路由。一个Virtual Host里面可以有若干个Exchange和Queue, 同一个Virtual Host里面不能有相同名称的Exchange或Queue</span><br><span class="line">Exchange : 交换机, 用于接收消息, 根据路由键转发消息到绑定的队列</span><br><span class="line">Binding : Exchange和Queue之间的虚拟连接, binding中可以包含routing key</span><br><span class="line">Routing Key : 一个路由规则, 虚拟机可用它来确定如何路由一个特定消息</span><br><span class="line">Queue : 也成Message Queue, 消息队列, 用于保存消息并将它们转发给消费者</span><br><span class="line"></span><br><span class="line">消息的可靠性传递或回退</span><br><span class="line">重试机制和幂等性保障</span><br><span class="line">自动确认与手动确认</span><br><span class="line">RabbitMQ提供了一种qos(服务质量保证)功能, 即在非自动确认消息的前提下, 如果一定数目的消息(通过consumer或者channel设置qos的值)未被确认前, 不进行消费新的消息</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">消息落库, 对消息状态进行标记</span><br><span class="line">消息的延迟投递, 做二次确认, 回调检查</span><br><span class="line"></span><br><span class="line">step1:消息入库</span><br><span class="line">step2:消息发送</span><br><span class="line">step3:消费端消息确认</span><br><span class="line">step4:更新库中消息状态为已确认</span><br><span class="line">step5:定时任务读取数据库中未确认的消息</span><br><span class="line">step6:未收到确认结果的消息重新发送</span><br><span class="line">step7:如果重试几次之后仍然失败, 则将消息状态更改为投递失败的终态, 后面需要人工介入</span><br></pre></td></tr></table></figure>


    

        <a href="/2020/03/17/%E9%9D%A2%E8%AF%95/%E8%A6%81%E7%82%B9%E6%95%B4%E7%90%86/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" class="post-more waves-effect waves-button">
            Continue reading...
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MYSQL/" rel="tag">MYSQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-面试/复盘/3.14腾讯面试"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2020-03-14 00:00:00" datetime="2020-03-13T16:00:00.000Z"  itemprop="datePublished">2020-03-14 </time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2020/03/14/%E9%9D%A2%E8%AF%95/%E5%A4%8D%E7%9B%98/3.14%E8%85%BE%E8%AE%AF%E9%9D%A2%E8%AF%95/">【面试复盘】腾讯面试</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <h3 id="redis-常用数据类型"><a href="#redis-常用数据类型" class="headerlink" title="redis 常用数据类型"></a>redis 常用数据类型</h3><h3 id="redis的删除机制"><a href="#redis的删除机制" class="headerlink" title="redis的删除机制"></a>redis的删除机制</h3><h3 id="mysql-查询数据量较大的时候"><a href="#mysql-查询数据量较大的时候" class="headerlink" title="mysql 查询数据量较大的时候"></a>mysql 查询数据量较大的时候</h3><h3 id="cap"><a href="#cap" class="headerlink" title="cap"></a>cap</h3>
    

        <a href="/2020/03/14/%E9%9D%A2%E8%AF%95/%E5%A4%8D%E7%9B%98/3.14%E8%85%BE%E8%AE%AF%E9%9D%A2%E8%AF%95/" class="post-more waves-effect waves-button">
            Continue reading...
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%A4%8D%E7%9B%98/" rel="tag">复盘</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-面试/复盘/3.13腾讯面试"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2020-03-13 00:00:00" datetime="2020-03-12T16:00:00.000Z"  itemprop="datePublished">2020-03-13 </time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2020/03/13/%E9%9D%A2%E8%AF%95/%E5%A4%8D%E7%9B%98/3.13%E8%85%BE%E8%AE%AF%E9%9D%A2%E8%AF%95/">【面试复盘】腾讯面试</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;where a&#x3D;1 and b&#x3D;2 and c&#x3D;3</span><br><span class="line">   &#x2F;&#x2F;where a&#x3D;1 and b&lt;2 and c&#x3D;3</span><br><span class="line">   &#x2F;&#x2F;where a&lt;2 and b&#x3D;2</span><br><span class="line">   &#x2F;&#x2F;where b&#x3D;1 and c&#x3D;2</span><br><span class="line">   &#x2F;&#x2F;where a&#x3D;1 and b&#x3D;2 order by c&lt;3</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F;var funcList []func()</span><br><span class="line">   &#x2F;&#x2F;for i :&#x3D; 0; i &lt; 3; i++ &#123;</span><br><span class="line">   &#x2F;&#x2F; funcList &#x3D; append(funcList, func() &#123;</span><br><span class="line">   &#x2F;&#x2F;    println(i)</span><br><span class="line">   &#x2F;&#x2F; &#125;)</span><br><span class="line">   &#x2F;&#x2F;</span><br><span class="line">   &#x2F;&#x2F;&#125;</span><br><span class="line">   &#x2F;&#x2F;</span><br><span class="line">   &#x2F;&#x2F;for j :&#x3D; 0; j &lt; 3; j++ &#123;</span><br><span class="line">   &#x2F;&#x2F; funcList[j]()</span><br><span class="line">   &#x2F;&#x2F;&#125;</span><br></pre></td></tr></table></figure>





<h3 id="消息队列推拉分别的利弊"><a href="#消息队列推拉分别的利弊" class="headerlink" title="消息队列推拉分别的利弊"></a>消息队列推拉分别的利弊</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Push方式：</span><br><span class="line">优点：有消息就推给消费者。延迟小,几乎可以做到实时。等等。。。。</span><br><span class="line"></span><br><span class="line">缺点：Server端接收到消息后，主动把消息推送给Client端，实时性高。对于一个提供队列服务的Server来说，用Push方式主动推送有很多弊端；首先是加大Server端的工作量，进而影响Server的性能，其次Client的处理能力各不相同，Client的状态不受Server控制，如果Client不能及时处理Server推送过来的消息，会造成各种潜在问题。</span><br><span class="line"></span><br><span class="line">菠萝科技注：意思是1 加大server(broker)工作量,影响性能。2 有的消费者机器配置好处理能力强,有的配置低处理能力低,但是server推相同数量级消息给消费者，就会导致消费者强的等待,弱的处理效率跟不上,从而导致崩溃。3server资源相比消费者的资源肯定是更宝贵  4总结下就是客户端慢消费(设计到io等耗时操作)时会放大缺点。</span><br><span class="line"></span><br><span class="line">Pull方式：</span><br><span class="line">优点：对比push优点就是消费者可以根据自己能力拉取消息处理。。。</span><br><span class="line"></span><br><span class="line">缺点：Client端循环地从Server端拉取消息，主动权在Client手里，自己拉取到一定量消息后，处理妥当了再接着取。Pull方式的问题是循环拉取消息的间隔不好设定，间隔太短就处在一个“忙等”的状态，浪费资源；每个Pull的时间间隔太长，Server端有消息到来有可能没有被及时处理。</span><br><span class="line"></span><br><span class="line">菠萝科技注：假如处理完消息后，现在空闲，设定多久去server再拉消息？主要问题就是消息处理延迟忙等。server没消息时,但是消费者因为是定时去pull，导致空pull。</span><br><span class="line"></span><br><span class="line">长轮询：</span><br><span class="line">CMQ (腾讯)提供了长轮询的优化方法，用以平衡 Pull&#x2F;Push 模型各自的缺点。</span><br></pre></td></tr></table></figure>



<h3 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h3><h3 id="Golang-在-runtime、系统调用等多方面对-goroutine-调度进行了封装和处理，当遇到长时间执行或者进行系统调用时，会主动把当前-goroutine-的CPU-P-转让出去，让其他-goroutine-能被调度并执行，也就是-Golang-从语言层面支持了协程。"><a href="#Golang-在-runtime、系统调用等多方面对-goroutine-调度进行了封装和处理，当遇到长时间执行或者进行系统调用时，会主动把当前-goroutine-的CPU-P-转让出去，让其他-goroutine-能被调度并执行，也就是-Golang-从语言层面支持了协程。" class="headerlink" title="Golang 在 runtime、系统调用等多方面对 goroutine 调度进行了封装和处理，当遇到长时间执行或者进行系统调用时，会主动把当前 goroutine 的CPU (P) 转让出去，让其他 goroutine 能被调度并执行，也就是 Golang 从语言层面支持了协程。"></a>Golang 在 runtime、系统调用等多方面对 goroutine 调度进行了封装和处理，当遇到长时间执行或者进行系统调用时，会主动把当前 goroutine 的CPU (P) 转让出去，让其他 goroutine 能被调度并执行，也就是 Golang 从语言层面支持了协程。</h3><h3 id="redis-cluster"><a href="#redis-cluster" class="headerlink" title="redis cluster"></a>redis cluster</h3><p>Codis 需要通过 Proxy 来定位目标节点，RedisCluster 是直接定位。客户端为了可以直接定位某个具体的 key 所在的节点，它就需要缓存槽位相关信息，这样才可以准确快速地定位到相应的节点。同时因为槽位的信息可能会存在客户端与服务器不一致的情况，还需要纠正机制来实现槽位信息的校验调整。</p>
<p>Cluster 默认会对 key 值使用 crc16 算法进行 hash 得到一个整数值，然后用这个整数值对 16384 进行取模来得到具体槽位。</p>
<h3 id="线程-进程和携程"><a href="#线程-进程和携程" class="headerlink" title="线程 进程和携程"></a>线程 进程和携程</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">协程是一种用户态的轻量级线程，协程的调度完全由用户控制（进程和线程都是由cpu 内核进行调度）。协程拥有自己的寄存器上下文和栈。协程调度切换时，将寄存器上下文和栈保存到其他地方，在切回来的时候，恢复先前保存的寄存器上下文和栈，直接操作栈则基本没有内核切换的开销，可以不加锁的访问全局变量，所以上下文的切换非常快。</span><br><span class="line">对于 进程、线程，都是有内核进行调度，有 CPU 时间片的概念，进行 抢占式调度（有多种调度算法）</span><br><span class="line">对于 协程(用户级线程)，这是对内核透明的，也就是系统并不知道有协程的存在，是完全由用户自己的程序进行调度的，因为是由用户程序自己控制，那么就很难像抢占式调度那样做到强制的 CPU 控制权切换到其他进程&#x2F;线程，通常只能进行 协作式调度，需要协程自己主动把控制权转让出去之后，其他协程才能被执行到。</span><br><span class="line"></span><br><span class="line">内存消耗方面</span><br><span class="line">每个 goroutine (协程) 默认占用内存远比 Java 、C 的线程少。</span><br><span class="line">goroutine：2KB（官方）</span><br><span class="line">线程：8MB（参考网络）</span><br><span class="line"></span><br><span class="line">线程和 goroutine 切换调度开销方面</span><br><span class="line">线程&#x2F;goroutine 切换开销方面，goroutine 远比线程小</span><br><span class="line">线程：涉及模式切换(从用户态切换到内核态)、16个寄存器、PC、SP...等寄存器的刷新等。</span><br><span class="line">goroutine：只有三个寄存器的值修改 - PC &#x2F; SP &#x2F; DX.</span><br></pre></td></tr></table></figure>


    

        <a href="/2020/03/13/%E9%9D%A2%E8%AF%95/%E5%A4%8D%E7%9B%98/3.13%E8%85%BE%E8%AE%AF%E9%9D%A2%E8%AF%95/" class="post-more waves-effect waves-button">
            Continue reading...
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%A4%8D%E7%9B%98/" rel="tag">复盘</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-面试/复盘/3.12头条面试"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2020-03-12 00:00:00" datetime="2020-03-11T16:00:00.000Z"  itemprop="datePublished">2020-03-12 </time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2020/03/12/%E9%9D%A2%E8%AF%95/%E5%A4%8D%E7%9B%98/3.12%E5%A4%B4%E6%9D%A1%E9%9D%A2%E8%AF%95/">【面试复盘】头条面试</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <h3 id="redis-主从同步"><a href="#redis-主从同步" class="headerlink" title="redis 主从同步"></a>redis 主从同步</h3><h3 id="判断是否是一个完全二叉树"><a href="#判断是否是一个完全二叉树" class="headerlink" title="判断是否是一个完全二叉树"></a>判断是否是一个完全二叉树</h3><h3 id="消息队列-推和拉的优劣"><a href="#消息队列-推和拉的优劣" class="headerlink" title="消息队列 推和拉的优劣"></a>消息队列 推和拉的优劣</h3>
    

        <a href="/2020/03/12/%E9%9D%A2%E8%AF%95/%E5%A4%8D%E7%9B%98/3.12%E5%A4%B4%E6%9D%A1%E9%9D%A2%E8%AF%95/" class="post-more waves-effect waves-button">
            Continue reading...
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%A4%8D%E7%9B%98/" rel="tag">复盘</a></li></ul>

    </div>
    
</article>

        </li>
    
        <li class="post-list-item fade">
            <article id="post-面试/复盘/3.10腾讯面试"
  class="article-card article-type-post" itemprop="blogPost">

    <div class="post-meta">
        <time class="post-time" title="2020-03-10 00:00:00" datetime="2020-03-09T16:00:00.000Z"  itemprop="datePublished">2020-03-10 </time>

        
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a></li></ul>



    </div>

    


  
    <h3 class="post-title" itemprop="name">
      <a class="post-title-link" href="/2020/03/10/%E9%9D%A2%E8%AF%95/%E5%A4%8D%E7%9B%98/3.10%E8%85%BE%E8%AE%AF%E9%9D%A2%E8%AF%95/">【面试复盘】腾讯面试</a>
    </h3>
  




    <div class="post-content" id="post-content" itemprop="postContent">

    
        <h3 id="哪种索引的性能最好"><a href="#哪种索引的性能最好" class="headerlink" title="哪种索引的性能最好"></a>哪种索引的性能最好</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">索引的选择性是指，不重复的索引值（也称为基数）和数据表的记录总数（rows）的比值，范围从1&#x2F;rows到1之间。索引的选择性越高则查询效率越高，因为选择性高的索引可以让Mysql在查找时过滤掉更多的行。唯一索引的选择性是1，这是最好的索引选择性，性能也是最好的。而假如我们是按某个表的性别字段作为索引列，这样选择性就很低，索引效果就不是很明显。</span><br></pre></td></tr></table></figure>



<h3 id="什么时候用不到索引"><a href="#什么时候用不到索引" class="headerlink" title="什么时候用不到索引"></a>什么时候用不到索引</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">以%开头的 like 查询不能利用 B-Tree 索引，执行计划中 key 的值为 null 表示没有使用索引</span><br><span class="line">数据类型出现隐式转换的时候也不会使用索引，例如，where &#39;age&#39; 10&#x3D;30</span><br><span class="line">对索引列进行函数运算，原因同上</span><br><span class="line">正则表达式不会使用索引</span><br><span class="line">字符串和数据比较不会使用索引</span><br><span class="line">复合索引的情况下，假如查询条件不包含索引列最左边部分，即不满足最左原则 leftmost，是不会使用复合索引的</span><br><span class="line">如果 MySQL 估计使用索引比全表扫描更慢，则不使用索引</span><br><span class="line">用 or 分割开的条件，如果 or 前的条件中的列有索引，而后面的列中没有索引，那么涉及的索引都不会被用到</span><br><span class="line">使用负向查询（not ，not in， not like ，&lt;&gt; ,!&#x3D; ,!&gt; ,!&lt; ） 不会使用索引</span><br></pre></td></tr></table></figure>





<h3 id="redis-压缩列表-跳表"><a href="#redis-压缩列表-跳表" class="headerlink" title="redis 压缩列表 跳表"></a>redis 压缩列表 跳表</h3><h3 id="aof日志量过大的时候重写，瘦身"><a href="#aof日志量过大的时候重写，瘦身" class="headerlink" title="aof日志量过大的时候重写，瘦身"></a>aof日志量过大的时候重写，瘦身</h3>
    

        <a href="/2020/03/10/%E9%9D%A2%E8%AF%95/%E5%A4%8D%E7%9B%98/3.10%E8%85%BE%E8%AE%AF%E9%9D%A2%E8%AF%95/" class="post-more waves-effect waves-button">
            Continue reading...
        </a>
    </div>
    
    <div class="post-footer">
        
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%A4%8D%E7%9B%98/" rel="tag">复盘</a></li></ul>

    </div>
    
</article>

        </li>
    
    </ul>

    
<nav id="page-nav">
    <div class="inner">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
    </div>
</nav>


</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license noopener" href="https://creativecommons.org/licenses/by/4.0/" target="_blank">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>chavey Liu &copy; 2020 - 2021</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://lcf12307.github.io/&title=fannnnnn&pic=http://lcf12307.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://lcf12307.github.io/&title=fannnnnn&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://lcf12307.github.io/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=fannnnnn&url=http://lcf12307.github.io/&via=http://lcf12307.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://lcf12307.github.io/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAAAAAAZai4+AAABXElEQVR42u3a0QqDMAxG4b3/SzvY1WBYzp+Ugc3JlTBXPwVjmvb1wnF94u74O9b/3RyyZB3Eupbxew65GL+N21uSJWskiwy9PpMkjiCJyJIla/mS8480GUeWLFk1Vloiy5Ili7NI0cwvTIrvbbW8LFlHsPqNJH781/6WLFkPYV1hkE9yP2TJmsbqNH06baP1aLJkTWOl5XI6BU0TDcpbsmQdyqpVs7XJKhpZlqxhLLKZIF1iIekAFeKyZI1h1Tb3pJfkH3u000GWrONYfNA1orY4ih6ELFkDWGnTlm8s4G/6bS0vS9ZIVtoASrf18PauLFnTWPyHdJmk36KSJWsOa++Gg9oMVJYsWekLzFNJpyksS9ZMFt92wM/Z8DxkyRrJ4lPTtJlbW9qRJUtWugjKm01BwS1Llqxd08uwUN6QIGTJejgrLYhrJXVwA7JkDWN15pJ8GsyXTmXJGsZ6AxsGDTQ0cDYNAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '等你回来！';
            clearTimeout(titleTime);
        } else {
            document.title = '欢迎回来!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
